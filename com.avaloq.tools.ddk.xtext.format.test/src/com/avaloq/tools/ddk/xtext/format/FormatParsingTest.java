/*
 * generated by Xtext 2.14.0
 */
package com.avaloq.tools.ddk.xtext.format;

import com.avaloq.tools.ddk.xtext.format.format.FormatConfiguration;
import com.google.inject.Inject;
import org.eclipse.xtext.resource.XtextResource;
import org.eclipse.xtext.testing.InjectWith;
import org.eclipse.xtext.testing.extensions.InjectionExtension;
import org.eclipse.xtext.testing.util.ParseHelper;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNotNull;

@ExtendWith(InjectionExtension.class)
@InjectWith(FormatInjectorProvider.class)
public class FormatParsingTest {

  @Inject
  private ParseHelper<FormatConfiguration> parseHelper;

  @Test
  public void loadModel() throws Exception {
    String input = "formatter for MyDsl\n"
        + "\n"
        + "const String SOME_STRING = \"\";\n"
        + "const int SOME_INT = 2;\n"
        + "\n"
        + "Person {\n"
        + "}    ";
    final FormatConfiguration result = parseHelper.parse(input);
    assertNotNull(result);
    boolean hasSyntaxErrors = ((XtextResource) result.eResource()).getParseResult().hasSyntaxErrors();
    assertFalse(hasSyntaxErrors,
        "Unexpected errors: " + String.join(", ",
            result.eResource().getErrors().stream().map(Object::toString).toList()));
  }
}
